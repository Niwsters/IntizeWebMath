WebMath = function() {
	this.start = function() {
		
		this.elements = {};
		
		this.elements.instructions = $('<span></span>', {
			'class' : 'iwm_instructions',
			'text' : this.getCurrentExercise().getInstructions()
		});
		
		this.elements.input = $('<input />', {
			'class' : 'iwm_answer'
		});
		
		this.elements.submit = $('<button />', {
			'class' : 'iwm_submit',
			'text' : 'Submit',
			'onClick' : 'WebMath.giveFeedback()'
		});
		
		this.elements.feedback = $('<span></span>', {
			'class' : 'iwm_feedback'
		});
		
		this.elements.chooseAddition = $('<button />', {
			'class' : 'iwm_choose_addition',
			'text' : 'Addition'
		});
		
		for(element in elements) {
			this.elements[element].appendTo('body');
		};
	};
	
	this.getAllElements = function() {
		return this.elements;
	};
	
	this.getCurrentExercise = function() {
		if(typeof this.currentExercise == 'undefined') {
			this.currentExercise = Exercise.getAdditionExercise();
		};
		
		return this.currentExercise;
	};
	
	this.giveFeedback = function() {
		if(this.input.val() == this.getCurrentExercise().getAnswer()) {
			this.feedback.text('Correct!');
		} else {
			this.feedback.text('Incorrect!');
		}
	};
	
	this.getAdditionExercise = function() {
		return new AdditionExercise();
	};
	
	this.getSubtractionExercise = function() {
		return new SubtractionExercise();
	};
	
	this.getAnswer = function() {
		return this.getCurrentExercise().getAnswer();
	};
};

WebMath = new WebMath();

/* Exercise = function() {
	this.getExercise = function() {
		
	};
};

Exercise = new Exercise(); */
Exercise = {};
Exercise.getAdditionExercise = function() {
	exercise = {};
	exercise.getInstructions = function() {
		if(typeof(this.instruction) == 'undefined') {
			this.instruction = "x + " + String(this.getB()) + " = 0";
		}
		
		return this.instruction;
	};
	
	exercise.getAnswer = function() {
		return -this.getB();
	};
	
	exercise.getB = function() {
		if(typeof(this.b) == 'undefined') {
			this.b = 1 + Math.floor(Math.random()*50);
		}
		
		return this.b;
	};
	
	return exercise;
}

Exercise.getSubtractionExercise = function() {
	exercise = {};
	exercise.getInstructions = function() {
		return "x - " + String(this.getB()) + " = 0";
	};
	
	exercise.getAnswer = function() {
		return this.getB();
	};
	
	exercise.getB = function() {
		if(typeof(this.b) == 'undefined') {
			this.b = 1 + Math.floor(Math.random()*50);
		}
		
		return this.b;
	};
	
	return exercise;
};
